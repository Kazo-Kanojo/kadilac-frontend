<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Termo de Responsabilidade</title>
    <link rel="stylesheet" href="../style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="recibo-a4 termo-responsabilidade">
        <header class="doc-header">
            <h1 style="text-transform: uppercase;">{{LOJA_RAZAO}}</h1>
            <p class="separador">***</p>
            <h2>Termo de Responsabilidade</h2>
            <p class="separador">***</p>
        </header>

        <main>
            <div class="field-group">
                <div class="field" style="flex-basis: 100%;">
                    <label>Eu,</label>
                    <span class="value">{{CLIENTE_NOME}}</span>
                </div>
                <div class="field half">
                    <label>CPF/CNPJ:</label>
                    <span class="value">{{CLIENTE_CPF}}</span>
                </div>
                <div class="field half">
                    <label>RG:</label>
                    <span class="value">{{CLIENTE_RG}}</span>
                </div>
                <div class="field full">
                    <label>com domicilio em:</label>
                    <span class="value">{{CLIENTE_ENDERECO}}</span>
                </div>
            </div>

            <p class="paragrafo-principal">
                Declaro para os devidos fins que assumo total responsabilidade Cível e Criminal, bem como multas e pontuações na CNH, referente ao veículo abaixo descrito, a partir da data e horário de saída da loja.
            </p>

            <section class="veiculo-box">
                <div class="field-group">
                    <div class="field full"><label>Veículo:</label><span>{{VEICULO_MARCA}} {{VEICULO_MODELO}}</span></div>
                    <div class="field half"><label>Placa:</label><span>{{VEICULO_PLACA}}</span></div>
                    <div class="field half"><label>Cor:</label><span>{{VEICULO_COR}}</span></div>
                    <div class="field full"><label>Renavam:</label><span>{{VEICULO_RENAVAM}}</span></div>
                </div>
                
                <div class="field-group" style="margin-top: 15px;">
                    <div class="field half">
                        <label>Data Saída:</label>
                        <span class="value">{{DATA_ATUAL}}</span>
                    </div>
                    <div class="field half">
                        <label>Hora Saída:</label>
                        <span class="value">__:__</span>
                    </div>
                </div>
            </section>

            <p class="paragrafo-legal" style="margin-top: 20px;">
                Comprometo-me a efetuar a transferência do veículo para meu nome no prazo máximo de 30 (trinta) dias, conforme art. 123 do CTB. O não cumprimento implicará em medidas judiciais cabíveis.
            </p>

            <p class="data-local">{{LOJA_CIDADE}}, {{DATA_ATUAL}}.</p>

            <footer>
                <div class="assinaturas">
                    <div class="assinatura-block">
                        <div class="linha-assinatura"></div>
                        <p style="text-transform: uppercase;">{{CLIENTE_NOME}}</p>
                        <p>Responsável (Cliente)</p>
                    </div>
                    <div class="assinatura-block">
                        <div class="linha-assinatura"></div>
                        <p style="text-transform: uppercase;">{{LOJA_RAZAO}}</p>
                        <p>Testemunha (Loja)</p>
                    </div>
                </div>
            </footer>
        </main>
    </div>

    <script>
        window.addEventListener('DOMContentLoaded', () => {
            const data = JSON.parse(localStorage.getItem('sistema_print_data'));
            if (!data) return;

            const replacements = {
                '{{LOJA_RAZAO}}': data.store?.razao_social || '',
                '{{LOJA_CIDADE}}': data.store?.cidade || '',
                '{{CLIENTE_NOME}}': data.client?.nome || '',
                '{{CLIENTE_CPF}}': data.client?.cpf_cnpj || '',
                '{{CLIENTE_RG}}': data.client?.rg || '',
                '{{CLIENTE_ENDERECO}}': data.client?.endereco || '',
                '{{VEICULO_MARCA}}': data.vehicle?.marca || '',
                '{{VEICULO_MODELO}}': data.vehicle?.modelo || '',
                '{{VEICULO_PLACA}}': data.vehicle?.placa || '',
                '{{VEICULO_COR}}': data.vehicle?.cor || '',
                '{{VEICULO_RENAVAM}}': data.vehicle?.renavam || '',
                '{{DATA_ATUAL}}': data.date
            };

            let html = document.body.innerHTML;
            for (const [key, val] of Object.entries(replacements)) {
                html = html.replace(new RegExp(key, 'g'), val);
            }
            document.body.innerHTML = html;
            setTimeout(() => window.print(), 500);
        });
    </script>
</body>
</html>